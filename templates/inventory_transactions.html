{% extends "base.html" %}

{% block title %}{{ transaction_type }} Transactions{% endblock %}

{% block content %}
<style>
    .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .btn-secondary { background-color: #6c757d; color: white; padding: 10px 18px; text-decoration: none; border-radius: 6px; font-weight: 500; }
    .data-table { width: 100%; border-collapse: collapse; }
    .data-table th, .data-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border-color); }
    .data-table th { background-color: #f9fafb; font-weight: 600; }
    .header-group { display: flex; align-items: center; gap: 20px; }
</style>

<div class="page-header">
    <h1>{{ transaction_type }} Transaction History</h1>
    <div class="header-group">
        {% if can_download %}
            {% if transaction_type == 'Incoming' %}
                <a href="{{ url_for('inventory.download_incoming_history') }}" class="btn-secondary">Download Report</a>
            {% else %}
                <a href="{{ url_for('inventory.download_outgoing_history') }}" class="btn-secondary">Download Report</a>
            {% endif %}
        {% endif %}
        <a href="{{ url_for('inventory.inventory_dashboard') }}" class="btn-secondary">Back to Dashboard</a>
    </div>
</div>

<div class="card">
    <table class="data-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Item Name</th>
                <th>Quantity</th>
                {% if transaction_type == 'Incoming' %}
                    <th>Supplier</th>
                    <th>LPO Number</th>
                {% else %}
                    <th>Distributed To (EMP ID)</th>
                    <th>Room</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for tx in transactions %}
            <tr>
                <td>{{ tx.date }}</td>
                <td>{{ tx.item_name }}</td>
                <td>{{ tx.quantity }}</td>
                {% if tx.type == 'Incoming' %}
                    <td>{{ tx.supplier_name or 'N/A' }}</td>
                    <td>{{ tx.lpo_number or 'N/A' }}</td>
                {% else %}
                    <td>{{ tx.emp_id }}</td>
                    <td>{{ tx.room_number }}</td>
                {% endif %}
            </tr>
            {% else %}
            <tr>
                <td colspan="5">No transactions found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}