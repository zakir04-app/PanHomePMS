{% extends "base.html" %}

{% block title %}Edit Maintenance Report{% endblock %}

{% block content %}
<style>
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0 25px; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-secondary); }
    .form-group input, .form-group select, .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        box-sizing: border-box;
    }
    .full-width { grid-column: 1 / -1; }
    .form-actions { text-align: right; }
    button {
        background-color: var(--accent-color);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
    }
</style>

<h1>Edit Maintenance Report #{{ report.id }}</h1>

<div class="card">
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('maintenance.edit_maintenance', report_id=report.id) }}">
        <div class="form-grid">
            <div class="form-group">
                <label for="report_date">Report Date</label>
                <input type="date" id="report_date" name="report_date" value="{{ report.report_date }}" required>
            </div>
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status">
                    <option value="Open" {% if report.status == 'Open' %}selected{% endif %}>Open</option>
                    <option value="Closed" {% if report.status == 'Closed' %}selected{% endif %}>Closed</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="block">Block</label>
                <input type="text" id="block" name="block" value="{{ report.block }}" required>
            </div>
            <div class="form-group">
                <label for="section">Section / Room</label>
                <input type="text" id="section" name="section" value="{{ report.section }}" required>
            </div>

            <div class="form-group">
                <label for="closed_date">Closed Date</label>
                <input type="date" id="closed_date" name="closed_date" value="{{ report.closed_date or '' }}">
            </div>

            <div class="form-group">
                <label for="concern">Concern / Assigned To</label>
                <input type="text" id="concern" name="concern" value="{{ report.concern or '' }}">
            </div>
            
            <div class="form-group">
                <label for="risk">Risk Level</label>
                <select id="risk" name="risk">
                    <option value="Low" {% if report.risk == 'Low' %}selected{% endif %}>Low</option>
                    <option value="Medium" {% if report.risk == 'Medium' %}selected{% endif %}>Medium</option>
                    <option value="High" {% if report.risk == 'High' %}selected{% endif %}>High</option>
                </select>
            </div>
            
            <div class="form-group full-width">
                <label for="details">Details of Issue</label>
                <textarea id="details" name="details" rows="4" required>{{ report.details }}</textarea>
            </div>
            <div class="form-group full-width">
                <label for="remarks">Remarks</label>
                <textarea id="remarks" name="remarks" rows="3">{{ report.remarks or '' }}</textarea>
            </div>
            <div class="form-group full-width">
                <label for="attached_file">Attach File (Current: {{ report.attached_file or 'None' }})</label>
                <input type="file" id="attached_file" name="attached_file">
            </div>
            <div class="form-group full-width form-actions">
                <button type="submit">Update Report</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}