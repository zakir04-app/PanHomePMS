{% extends "base.html" %}

{% block title %}Edit AMC Service{% endblock %}

{% block content %}
<style>
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0 25px; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-secondary); }
    .form-group input, .form-group select, .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: 6px;
        box-sizing: border-box;
    }
    .full-width { grid-column: 1 / -1; }
    .form-actions { text-align: right; }
    button { background-color: var(--accent-color); color: white; border: none; padding: 12px 20px; border-radius: 6px; font-weight: 500; cursor: pointer; }
</style>

<h1>Edit AMC Service</h1>

<div class="card">
    <form method="POST" action="{{ url_for('amcs.edit_amcs', amc_id=amc.id) }}" enctype="multipart/form-data">
        <div class="form-grid">
            <div class="form-group">
                <label for="date">Date of Entry</label>
                <input type="date" id="date" name="date" value="{{ amc.date }}" required>
            </div>
            <div class="form-group">
                <label for="type">AMC Type</label>
                <input type="text" id="type" name="type" value="{{ amc.type }}" required>
            </div>
            
            <div class="form-group">
                <label for="supplier_name">Supplier Name</label>
                <select id="supplier_name" name="supplier_name" required>
                    <option value="">-- Select Supplier --</option>
                    {% for supplier in suppliers %}
                        <option value="{{ supplier.name }}" {% if amc.supplier_name == supplier.name %}selected{% endif %}>{{ supplier.name }}</option>
                    {% endfor %}
                </select>
                <small><a href="{{ url_for('amcs.manage_suppliers') }}">Manage Suppliers</a></small>
            </div>
            
            <div class="form-group">
                <label for="inspection_date">Inspection Date</label>
                <input type="date" id="inspection_date" name="inspection_date" value="{{ amc.inspection_date }}" required>
            </div>
            <div class="form-group">
                <label for="expiry_date">Expiry Date</label>
                <input type="date" id="expiry_date" name="expiry_date" value="{{ amc.expiry_date }}" required>
            </div>
            
            <div class="form-group full-width">
                <label for="remarks">Remarks</label>
                <textarea id="remarks" name="remarks" rows="4">{{ amc.remarks }}</textarea>
            </div>
            <div class="form-group full-width">
                <label for="attached_file">Attach New File (optional)</label>
                <input type="file" id="attached_file" name="attached_file">
            </div>
            <div class="form-group full-width form-actions">
                <button type="submit">Update AMC Service</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}